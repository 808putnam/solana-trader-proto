syntax = "proto3";
package api;
option go_package = "github.com/bloXroute-Labs/solana-trader-proto/api";

import "google/api/annotations.proto";
import "google/protobuf/timestamp.proto";
import "google/api/field_behavior.proto";
import "google/api/visibility.proto";
import "protoc-gen-openapiv2/options/annotations.proto";
import "common.proto";

option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {
  security: {
    security_requirement: {
      key: "Auth Header";
      value: {
        scope: []
      }
    }
  }
  security_definitions: {
    security: {
      key: "Auth Header";
      value: {
        type: TYPE_API_KEY;
        in: IN_HEADER;
        name: "Authorization";
      };
    }
  };
  info: {
    title: "Trader API";
    version: "1.6";
    description: "Easy-to-use API for interacting with trader services on the Solana blockchain, powered by bloXroute Labs.";
    contact: {
      name: "bloXroute Labs Trader API Documentation";
      url: "https://docs.bloxroute.com/solana/trader-api";
      email: "support@bloxroute.com";
    };
  };

  consumes: "application/json";
  produces: "application/json";
};

service Api {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_tag) = {
    external_docs: {
      description: "Detailed API documentation";
      url: "https://bloxroute.gitbook.io/serum-api/about/welcome"
    }
  };

  // Raydium V2
  rpc GetRaydiumPools(GetRaydiumPoolsRequest) returns (GetRaydiumPoolsResponse) {
    option (google.api.http) = {
      get: "/api/v2/raydium/pools"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of Raydium pools";
      summary: "Raydium Pools";
      tags: ["Raydium V2"];
    };
  }

  rpc GetRaydiumQuotes(GetRaydiumQuotesRequest) returns (GetRaydiumQuotesResponse) {
    option (google.api.http) = {
      get: "/api/v2/raydium/quotes"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns quotes from Raydium";
      summary: "Raydium Quotes";
      tags: ["Raydium V2"];
    };
  }

  rpc GetRaydiumPrices(GetRaydiumPricesRequest) returns (GetRaydiumPricesResponse) {
    option (google.api.http) = {
      get: "/api/v2/raydium/prices"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of prices for specified tokens on Raydium";
      summary: "Token prices on Rayidum";
      tags: ["Raydium V2"];
    };
  }

  rpc PostRaydiumSwap(PostRaydiumSwapRequest) returns (PostRaydiumSwapResponse) {
    option (google.api.http) = {
      post: "/api/v2/raydium/swap"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates an unsigned transaction object to make a swap on Raydium";
      summary: "Unsigned Raydium swap transaction";
      tags: ["Raydium V2"];
    };
  }

  rpc PostRaydiumRouteSwap(PostRaydiumRouteSwapRequest) returns (PostRaydiumRouteSwapResponse) {
    option(google.api.http) = {
      post: "/api/v2/raydium/route-swap"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates an unsigned transaction object to make a swap on Raydium on the specified route";
      summary: "Unsigned Raydium swap transaction along route";
      tags: ["Raydium V2"];
    };
  }
  // End of Raydium V2

  // Jupiter V2
  rpc GetJupiterQuotes(GetJupiterQuotesRequest) returns (GetJupiterQuotesResponse) {
    option (google.api.http) = {
      get: "/api/v2/jupiter/quotes"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns quotes from Jupiter";
      summary: "Jupiter Quotes";
      tags: ["Jupiter V2"];
    };
  }

  rpc GetJupiterPrices(GetJupiterPricesRequest) returns (GetJupiterPricesResponse) {
    option (google.api.http) = {
      get: "/api/v2/jupiter/prices"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of prices for specified tokens on Jupiter";
      summary: "Token prices on Jupiter";
      tags: ["Jupiter V2"];
    };
  }

  rpc PostJupiterSwap(PostJupiterSwapRequest) returns (PostJupiterSwapResponse) {
    option (google.api.http) = {
      post: "/api/v2/jupiter/swap"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates an unsigned transaction object to make a swap on Jupiter";
      summary: "Unsigned Jupiter swap transaction";
      tags: ["Jupiter V2"];
    };
  }

  rpc PostJupiterRouteSwap(PostJupiterRouteSwapRequest) returns (PostJupiterRouteSwapResponse) {
    option(google.api.http) = {
      post: "/api/v2/jupiter/route-swap"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates an unsigned transaction object to make a swap on Jupiter on the specified route";
      summary: "Unsigned Jupiter swap transaction along route";
      tags: ["Jupiter V2"];
    };
  }
  // End of Jupiter V2



  // Drift V2
  rpc PostCloseDriftPerpPositions(PostCloseDriftPerpPositionsRequest) returns (PostCloseDriftPerpPositionsResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/perp/close"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to close a perp position on Drift";
      summary: "closes a perp position on Drift";
      tags: ["Drift Perp V2"];
    };
  }

  rpc GetDriftPerpOrderbook(GetDriftPerpOrderbookRequest) returns (GetDriftPerpOrderbookResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/perp/orderbook/{contract}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns perp contract's orderbook on Drift. Use limit param to reduce the number of bids/asks returned";
      summary: "Perpetuals contract orderbook on Drift";
      tags: ["Drift Perp V2"];
    };
  }

  rpc PostCreateDriftUser(PostCreateDriftUserRequest) returns (PostCreateDriftUserResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/user"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to create a user on Drift";
      summary: "creates a user profile on Drift";
      tags: ["Drift V2"];
    };
  }

  rpc GetDriftUser(GetDriftUserRequest) returns (GetDriftUserResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/user"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the user info for an account on Drift";
      summary: "gets the user on Drift";
      tags: ["Drift V2"];
    };
  }

  rpc PostDriftManageCollateral(PostDriftManageCollateralRequest) returns (PostDriftManageCollateralResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/manage-collateral"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to manage collateral on Drift";
      summary: "posts collateral on Drift";
      tags: ["Drift V2"];
    };
  }

  rpc PostDriftPerpOrder(PostDriftPerpOrderRequest)  returns (PostDriftPerpOrderResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/perp/place"
      body: "*",
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "posts a perp order on Drift";
      summary: "perp order on Drift";
      tags: ["Drift Perp V2"];
    };
  }

  rpc PostDriftSettlePNL(PostDriftSettlePNLRequest) returns (PostDriftSettlePNLResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/perp/settle-pnl"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to settle pnl on Drift";
      summary: "settle pnl on Drift";
      tags: ["Drift Perp V2"];
    };
  }

  rpc PostDriftSettlePNLs(PostDriftSettlePNLsRequest) returns (PostDriftSettlePNLsResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/perp/settle-pnls"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to settle pnls on Drift";
      summary: "settle pnls on Drift";
      tags: ["Drift Perp V2"];
    };
  }

  rpc GetDriftAssets(GetDriftAssetsRequest) returns (GetDriftAssetsResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/assets"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns details of assets a user has on Drift";
      summary: "details of assets a user on Drift";
      tags: ["Drift V2"];
    };
  }

  rpc GetDriftPerpContracts(GetDriftPerpContractsRequest) returns (GetDriftPerpContractsResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/perp/contracts"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns details of available perp contracts on Drift";
      summary: "details of available perp contracts on Drift";
      tags: ["Drift Perp V2"];
    };
  }

  rpc PostLiquidateDriftPerp(PostLiquidateDriftPerpRequest) returns (PostLiquidateDriftPerpResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/perp/liquidate"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to liquidate perp positions on Drift";
      summary: "liquidate perp positions";
      tags: ["Drift Perp V2"];
    };
  }

  rpc GetDriftOpenPerpOrder(GetDriftOpenPerpOrderRequest)  returns (GetDriftOpenPerpOrderResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/perp/open-order"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the detail of an open perp order either by ID or ClientOrderID";
      summary: "PERP order";
      tags: ["Drift Perp V2"];
    };
  }

  rpc GetDriftOpenMarginOrder(GetDriftOpenMarginOrderRequest)  returns (GetDriftOpenMarginOrderResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/margin/open-order"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the detail of an open margin order either by ID or ClientOrderID";
      summary: "Margin open order";
      tags: ["Drift Margin V2"];
    };
  }

  rpc GetDriftPerpPositions(GetDriftPerpPositionsRequest)  returns (GetDriftPerpPositionsResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/perp/positions"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list current Drift perp positions";
      summary: "Drift perp positions";
      tags: ["Drift Perp V2"];
    };
  }

  rpc GetDriftOpenPerpOrders(GetDriftOpenPerpOrdersRequest)  returns (GetDriftOpenPerpOrdersResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/perp/open-orders"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list current open perp orders on Drift";
      summary: "Drift open perp order";
      tags: ["Drift Perp V2"];
    };
  }

  rpc PostDriftCancelPerpOrder(PostDriftCancelPerpOrderRequest) returns (PostDriftCancelPerpOrderResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/perp/cancel"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to cancel perp orders on Drift";
      summary: "cancel perp orders on Drift";
      tags: ["Drift Perp V2"];
    };
  }

  rpc PostModifyDriftOrder(PostModifyDriftOrderRequest)  returns (PostModifyDriftOrderResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/modify-order"
      body: "*",
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "post a modify order tx on Drift";
      summary: "modify Drift order";
      tags: ["Drift V2"];
    };
  }

  rpc PostCancelDriftMarginOrder(PostCancelDriftMarginOrderRequest) returns (PostCancelDriftMarginOrderResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/margin/cancel"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to cancel Drift margin orders";
      summary: "cancel Drift margin orders";
      tags: ["Drift Margin V2"];
    };
  }

  rpc GetDriftOpenMarginOrders(GetDriftOpenMarginOrdersRequest)  returns (GetDriftOpenMarginOrdersResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/margin/open-orders"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the detail of all open margin orders";
      summary: "Margin open order";
      tags: ["Drift Margin V2"];
    };
  }

  rpc GetDriftMarkets(GetDriftMarketsRequest) returns (GetDriftMarketsResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/markets"
    };

    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of orderbook markets";
      summary: "drift orderbook markets";
      tags: ["Drift Margin V2"];
    };
  }

  rpc PostDriftMarginOrder(PostDriftMarginOrderRequest)  returns (PostDriftMarginOrderResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/margin/place"
      body: "*",
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Places a margin order on Drift";
      summary: "margin order";
      tags: ["Drift Margin V2"];
    };
  }

  rpc PostDriftEnableMarginTrading(PostDriftEnableMarginTradingRequest)  returns (PostDriftEnableMarginTradingResponse) {
    option (google.api.http) = {
      post: "/api/v2/drift/margin-enable"
      body: "*",
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Enables a margin trading on Drift";
      summary: "margin order";
      tags: ["Drift Margin V2"];
    };
  }

  rpc GetDriftMarginOrderbook(GetDriftMarginOrderbookRequest) returns (GetDriftMarginOrderbookResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/margin/orderbooks/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns perp contract's orderbook. Use limit param to reduce the number of bids/asks returned";
      summary: "Perpetuals contract orderbook";
      tags: ["Drift Margin V2"];
    };
  }

  rpc GetDriftMarketDepth(GetDriftMarketDepthRequest) returns (GetDriftMarketDepthResponse) {
    option (google.api.http) = {
      get: "/api/v2/drift/perp/market-depth/{contract}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns Drift contract's market depth data. Use limit param to reduce the number of bids/asks's data points returned";
      summary: "Perpetuals contract orderbook";
      tags: ["Drift Perp V2"];
    };
  }

  rpc GetDriftMarginOrderbooksStream(GetDriftMarginOrderbooksRequest) returns (stream GetDriftMarginOrderbooksStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: ["Drift Margin V2"];
    };
  }

  rpc GetDriftMarketDepthsStream(GetDriftMarketDepthsStreamRequest) returns (stream GetDriftMarketDepthStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: ["Drift Perp V2"];
    };
  }
  // end of Drift V2

  //Openbook V2

  rpc GetMarketsV2(GetMarketsRequestV2) returns (GetMarketsResponseV2) {
    option (google.api.http) = {
      get: "/api/v2/openbook/markets"
    };

    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of orderbook markets";
      summary: "Openbook markets";
      tags: ["Openbook V2"];
    };
  }

  rpc GetTickersV2(GetTickersRequestV2) returns (GetTickersResponseV2) {
    option (google.api.http) = {
      get: "/api/v2/openbook/tickers/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns updated ticker(s). To receive all tickers use empty string for {market} param value";
      summary: "Openbook tickers";
      tags: ["Openbook V2"];
    };
  }

  rpc GetOrderbookV2(GetOrderbookRequestV2) returns (GetOrderbookResponseV2) {
    option (google.api.http) = {
      get: "/api/v2/openbook/orderbooks/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns market's orderbook. Use limit param to reduce the number of bids/asks returned";
      summary: "Openbook market orderbook";
      tags: ["Openbook V2"];
    };
  }

  rpc GetMarketDepthV2(GetMarketDepthRequestV2) returns (GetMarketDepthResponseV2) {
    option (google.api.http) = {
      get: "/api/v2/openbook/depth/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns market's aggregated price data. Use limit param to reduce the number of price points returned";
      summary: "Openbook market depth";
      tags: ["Openbook V2"];
    };
  }

  rpc PostOrderV2(PostOrderRequestV2) returns (PostOrderResponse) {
    option (google.api.http) = {
      post: "/api/v2/openbook/place"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a NewOrderV3 unsigned transaction object";
      summary: "Openbook unsigned NewOrderV3 transaction";
      tags: ["Openbook V2"];
    };
  }

  rpc PostCancelOrderV2(PostCancelOrderRequestV2) returns (PostCancelOrderResponseV2) {
    option (google.api.http) = {
      post: "/api/v2/openbook/cancel"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a CancelOrder unsigned transaction object";
      summary: "Openbook unsigned CancelOrder transaction";
      tags: ["Openbook V2"];
    };
  }

  rpc PostReplaceOrderV2(PostReplaceOrderRequestV2) returns (PostOrderResponse) {
    option (google.api.http) = {
      post: "/api/v2/openbook/replace"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a ReplaceOrder unsigned transaction object";
      summary: "Openbook Unsigned ReplaceOrder transaction";
      tags:["Openbook V2"];
    };
  }

  rpc PostSettleV2(PostSettleRequestV2) returns (PostSettleResponse) {
    option (google.api.http) = {
      post: "/api/v2/openbook/settle"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a SettleFunds unsigned transaction object";
      summary: "Openbook unsigned SettleFunds transaction";
      tags: ["Openbook V2"];
    };
  }

  rpc GetOpenOrdersV2(GetOpenOrdersRequestV2) returns (GetOpenOrdersResponse) {
    option (google.api.http) = {
      get: "/api/v2/openbook/open-orders/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of open orders per user per market";
      summary: "List of user's open orders in Openbook";
      tags: ["Openbook V2"];
    };
  }

  rpc GetUnsettledV2(GetUnsettledRequestV2) returns (GetUnsettledResponse) {
    option (google.api.http) = {
      get: "/api/v2/openbook/unsettled/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the unsettled amounts of user in a market";
      summary: "Unsettled amounts";
      tags: ["Openbook V2"];
    };
  }

  //end of Openbook V2

  rpc GetPrice(GetPriceRequest) returns (GetPriceResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/price"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of prices for specified tokens";
      summary: "Token prices";
      tags: ["Market", "Universal"];
    };
  }

  rpc GetMarkets(GetMarketsRequest) returns (GetMarketsResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/markets"
    };

    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of orderbook markets";
      summary: "Orderbook markets";
      tags: ["Market", "Orderbook"];
    };
  }

  rpc GetPools(GetPoolsRequest) returns (GetPoolsResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/pools"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of supported AMM pools";
      summary: "AMM Pools";
      tags: ["Market", "AMM"];
    };
  }

  rpc GetTickers(GetTickersRequest) returns (GetTickersResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/tickers/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns updated ticker(s). To receive all tickers use empty string for {market} param value";
      summary: "Orderbook tickers";
      tags: ["Market", "Orderbook"];
    };
  }

  rpc GetKline(GetKlineRequest) returns (GetKlineResponse) {
    option (google.api.method_visibility).restriction = "INTERNAL";
    option (google.api.http) = {
      get: "/api/v1/market/kline/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the KLine per market";
      summary: "Market KLine";
      tags: ["Market", "Orderbook"];
    };
  }

  rpc GetOrderbook(GetOrderbookRequest) returns (GetOrderbookResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/orderbooks/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns market's orderbook. Use limit param to reduce the number of bids/asks returned";
      summary: "Market orderbook";
      tags: ["Market", "Orderbook"];
    };
  }

  rpc GetMarketDepth(GetMarketDepthRequest) returns (GetMarketDepthResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/depth/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns market's aggregated price data. Use limit param to reduce the number of price points returned";
      summary: "Market depth";
      tags: "Market";
    };
  }

  rpc GetTrades(GetTradesRequest) returns (GetTradesResponse) {
    option (google.api.method_visibility).restriction = "INTERNAL";
    option (google.api.http) = {
      get: "/api/v1/market/trades/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns recent trades on the market";
      summary: "Market trades";
      tags: ["Market", "Orderbook"];
    };
  }

  rpc GetQuotes(GetQuotesRequest) returns (GetQuotesResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/quote"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns quotes from supported AMMs";
      summary: "AMM Quotes";
      tags: ["Market", "AMM"];
    };
  }

  // system API
  rpc GetServerTime(GetServerTimeRequest) returns (GetServerTimeResponse) {
    option (google.api.http) = {
      get: "/api/v1/system/time"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns current time on the server";
      summary: "Server time";
      tags: "System";
    };
  }

  rpc GetRecentBlockHash(GetRecentBlockHashRequest) returns (GetRecentBlockHashResponse) {
    option (google.api.http) = {
      get: "/api/v1/system/blockhash"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns recent block hash";
      summary: "Recent block hash";
      tags: "System";
    };
  }

  // account endpoints
  rpc GetAccountBalance(GetAccountBalanceRequest) returns (GetAccountBalanceResponse) {
    option (google.api.http) = {
      get: "/api/v1/account/balance"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the all token balances for a wallet";
      summary: "Token balances";
      tags: "Account";
    };
  }

  rpc GetTokenAccounts(GetTokenAccountsRequest) returns (GetTokenAccountsResponse) {
    option (google.api.http) = {
      get: "/api/v1/account/token-accounts"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the all token accounts with their balances for a wallet";
      summary: "Token accounts with balances";
      tags: "Account";
    };
  }

  // trade endpoints
  rpc PostOrder(PostOrderRequest) returns (PostOrderResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/place"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a NewOrderV3 unsigned transaction object";
      summary: "Unsigned NewOrderV3 transaction";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc PostSubmit(PostSubmitRequest) returns (PostSubmitResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/submit"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Submits a signed transaction";
      summary: "Transaction submit";
      tags: ["Trade", "Universal"];
    };
  }

  rpc PostSubmitBatch(PostSubmitBatchRequest) returns (PostSubmitBatchResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/submit-batch"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Submits a batch of signed transactions";
      summary: "Transaction batch submit";
      tags: ["Trade", "Universal"];
    };
  }

  rpc PostCancelOrder(PostCancelOrderRequest) returns (PostCancelOrderResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/cancel"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a CancelOrder unsigned transaction object";
      summary: "Unsigned CancelOrder transaction";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc PostCancelByClientOrderID(PostCancelByClientOrderIDRequest) returns (PostCancelOrderResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/cancelbyid"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a CancelOrderByID unsigned transaction object";
      summary: "Unsigned CancelOrderByID transaction";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc PostCancelAll(PostCancelAllRequest) returns (PostCancelAllResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/cancelall"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a CancelAll unsigned transaction object";
      summary: "Unsigned CancelAll transaction";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc PostReplaceByClientOrderID(PostOrderRequest) returns (PostOrderResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/replacebyclientid"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a ReplaceByClientOrderID unsigned transaction object";
      summary: "Unsigned ReplaceByClientOrderID transaction";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc PostReplaceOrder(PostReplaceOrderRequest) returns (PostOrderResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/replace"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a ReplaceOrder unsigned transaction object";
      summary: "Unsigned ReplaceOrder transaction";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc PostSettle(PostSettleRequest) returns (PostSettleResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/settle"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates a SettleFunds unsigned transaction object";
      summary: "Unsigned SettleFunds transaction";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc PostTradeSwap(TradeSwapRequest) returns (TradeSwapResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/swap"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates an unsigned transaction object for the best available AMM swap";
      summary: "Unsigned best available AMM swap transaction";
      tags: ["Trade", "AMM"];
    };
  }

  rpc GetOrders(GetOrdersRequest) returns (GetOrdersResponse) {
    option (google.api.method_visibility).restriction = "INTERNAL";
    option (google.api.http) = {
      get: "/api/v1/trade/orders/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns all user's orders";
      summary: "List of user's orders";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc GetOpenOrders(GetOpenOrdersRequest) returns (GetOpenOrdersResponse) {
    option (google.api.http) = {
      get: "/api/v1/trade/openorders/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list of open orders per user per market";
      summary: "List of user's open orders";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc GetOrderByID(GetOrderByIDRequest) returns (GetOrderByIDResponse) {
    option (google.api.method_visibility).restriction = "INTERNAL";
    option (google.api.http) = {
      get: "/api/v1/trade/orderbyid/{orderID}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns an order by ID";
      summary: "Order by ID";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc GetUnsettled(GetUnsettledRequest) returns (GetUnsettledResponse) {
    option (google.api.http) = {
      get: "/api/v1/trade/unsettled/{market}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the unsettled amounts of user in a market";
      summary: "Unsettled amounts";
      tags: ["Trade", "Orderbook"];
    };
  }

  rpc PostRouteTradeSwap(RouteTradeSwapRequest) returns (TradeSwapResponse) {
    option(google.api.http) = {
      post: "/api/v1/trade/route-swap"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Generates an unsigned transaction object for the AMM swap on the specified route";
      summary: "Unsigned AMM swap transaction along route";
      tags: ["Trade", "AMM"];
    };
  }

  // Drift V1 endpoints

  // perp endpoints
  // migrated to v2
  rpc PostPerpOrder(PostPerpOrderRequest)  returns (PostPerpOrderResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/perp/order"
      body: "*",
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "post a perp order";
      summary: "perp order";
      tags: ["Trade", "Perp", "Orderbook"];
    };
  }
  // migrated to v2
  rpc GetPerpPositions(GetPerpPositionsRequest)  returns (GetPerpPositionsResponse) {
    option (google.api.http) = {
      get: "/api/v1/trade/perp/positions"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list current perp positions";
      summary: "PERP positions";
      tags: ["Trade", "Perp", "Orderbook"];
    };
  }
  // migrated to v2
  rpc GetOpenPerpOrders(GetOpenPerpOrdersRequest)  returns (GetOpenPerpOrdersResponse) {
    option (google.api.http) = {
      get: "/api/v1/trade/perp/open-orders"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the list current open perp orders positions";
      summary: "PERP order positions";
      tags: ["Trade", "Perp", "Orderbook"];
    };
  }
  // migrated to v2
  rpc PostCancelPerpOrders(PostCancelPerpOrdersRequest) returns (PostCancelPerpOrdersResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/perp/cancel"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to cancel perp orders on a supported platform";
      summary: "cancel perp orders on a supported platform";
      tags: ["Trade", "Perp", "Orderbook"];
    };
  }
  // migrated to v2
  rpc PostCancelPerpOrder(PostCancelPerpOrderRequest) returns (PostCancelPerpOrderResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/perp/cancelbyid"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to cancel perp order either based on order id or client order id on a supported platform";
      summary: "cancel perp order by id on a supported platform";
      tags: ["Trade", "Perp", "Orderbook"];
    };
  }
  // migrated to v2
  rpc PostClosePerpPositions(PostClosePerpPositionsRequest) returns (PostClosePerpPositionsResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/perp/close"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to close a perp position on a supported platform";
      summary: "closes a perp position on a supported platform";
      tags: ["Trade", "Perp", "Orderbook"];
    };
  }
  // migrated to v2
  rpc GetPerpOrderbook(GetPerpOrderbookRequest) returns (GetPerpOrderbookResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/perp/orderbook/{contract}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns perp contract's orderbook. Use limit param to reduce the number of bids/asks returned";
      summary: "Perpetuals contract orderbook";
      tags: ["Perp", "Orderbook", "Market"];
    };
  }
  // migrated to v2
  rpc PostCreateUser(PostCreateUserRequest) returns (PostCreateUserResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/user"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to create a user on a supported platform";
      summary: "creates a user profile on a supported platform";
      tags: ["Trade"];
    };
  }
  // migrated to v2
  rpc GetUser(GetUserRequest) returns (GetUserResponse) {
    option (google.api.http) = {
      get: "/api/v1/trade/user"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the user info for an account on a supported platform";
      summary: "gets the user on a supported platform";
      tags: ["Trade"];
    };
  }
  // migrated to v2
  rpc PostManageCollateral(PostManageCollateralRequest) returns (PostManageCollateralResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/perp/managecollateral"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to manage collateral";
      summary: "posts collateral on a perp platform";
      tags: ["Perp", "Trade"];
    };
  }
  // migrated to v2
  rpc PostSettlePNL(PostSettlePNLRequest) returns (PostSettlePNLResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/perp/settle-pnl"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to settle pnl";
      summary: "settle pnl on a perp platform";
      tags: ["Perp", "Trade"];
    };
  }
  // migrated to v2
  rpc PostSettlePNLs(PostSettlePNLsRequest) returns (PostSettlePNLsResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/perp/settle-pnls"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to settle pnls";
      summary: "settle pnls on a perp platform";
      tags: ["Perp", "Trade"];
    };
  }
  // migrated to v2
  rpc GetAssets(GetAssetsRequest) returns (GetAssetsResponse) {
    option (google.api.http) = {
      get: "/api/v1/trade/perp/assets"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns details of assets a user has";
      summary: "details of assets a user has";
      tags: ["Perp", "Trade"];
    };
  }
  // migrated to v2
  rpc GetPerpContracts(GetPerpContractsRequest) returns (GetPerpContractsResponse) {
    option (google.api.http) = {
      get: "/api/v1/market/perp/contracts"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns details of available perp contracts";
      summary: "details of available perp contracts";
      tags: ["Perp", "Market"];
    };
  }
  // migrated to v2
  rpc PostLiquidatePerp(PostLiquidatePerpRequest) returns (PostLiquidatePerpResponse) {
    option (google.api.http) = {
      post: "/api/v1/trade/perp/liquidate"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns a partially signed txn signature to liquidate perp positions";
      summary: "liquidate perp positions";
      tags: ["Perp", "Trade"];
    };
  }
  // migrated to v2
  rpc GetOpenPerpOrder(GetOpenPerpOrderRequest)  returns (GetOpenPerpOrderResponse) {
    option (google.api.http) = {
      get: "/api/v1/trade/perp/open-order-by-id"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      description: "Returns the detail of an open perp order";
      summary: "PERP order";
      tags: ["Trade", "Perp", "Orderbook"];
    };
  }

  // streaming endpoints
  rpc GetOrderbooksStream(GetOrderbooksRequest) returns (stream GetOrderbooksStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "Trade";
    };
  }

  rpc GetMarketDepthsStream(GetMarketDepthsRequest) returns (stream GetMarketDepthsStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "Trade";
    };
  }

  rpc GetTickersStream(GetTickersRequest) returns (stream GetTickersStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "Trade";
    };
  }

  rpc GetTradesStream(GetTradesRequest) returns (stream GetTradesStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "Trade";
    };
  }

  rpc GetOrderStatusStream(GetOrderStatusStreamRequest) returns (stream GetOrderStatusStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "Trade";
    };
  }

  rpc GetRecentBlockHashStream(GetRecentBlockHashRequest) returns (stream GetRecentBlockHashResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "System";
    };
  }

  rpc GetBlockStream(GetBlockStreamRequest) returns (stream GetBlockStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "System";
    };
  }

  rpc GetQuotesStream(GetQuotesStreamRequest) returns (stream GetQuotesStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "AMMs";
    };
  }

  rpc GetPoolReservesStream(GetPoolReservesStreamRequest) returns (stream GetPoolReservesStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "AMMs";
    };
  }

  rpc GetPricesStream(GetPricesStreamRequest) returns (stream GetPricesStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "AMMs";
    };
  }

  rpc GetSwapsStream(GetSwapsStreamRequest) returns (stream GetSwapsStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "AMMs";
    };
  }

  // Perp streaming endpoints
  rpc GetPerpOrderbooksStream(GetPerpOrderbooksRequest) returns (stream GetPerpOrderbooksStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "Perp";
    };
  }

  rpc GetPerpTradesStream(GetPerpTradesStreamRequest) returns (stream GetPerpTradesStreamResponse) {
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      tags: "Perp";
    };
  }
}

message GetMarketsRequest {
}

message GetMarketsResponse {
  map<string, Market> markets = 1;
}

message Market {
  string market = 1;
  MarketStatus status = 2;
  string address = 3;
  string baseMint = 4;
  string quotedMint = 5;
  int64 baseDecimals = 6;
  int64 quoteDecimals = 7;
  Project project = 8;
}

enum MarketStatus {
  MS_UNKNOWN = 0; // unknown
  MS_ONLINE = 1; // online
}

message GetTickersRequest {
  string market = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use empty string for all markets"}];
  Project project = 2;
}

message GetTickersResponse {
  repeated Ticker tickers = 1;
}

message Ticker {
  string market = 1;
  string marketAddress = 2;
  double bid = 3;
  double bidSize = 4;
  double ask = 5;
  double askSize = 6;
  Project project = 7;
}

message GetTickersRequestV2 {
  string market = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use empty array for all markets"}];
}

message GetTickersResponseV2 {
  map<string, Candle> marketTickers = 1;
}

message GetKlineRequest {
  string market = 1;
  google.protobuf.Timestamp from = 2;
  google.protobuf.Timestamp to = 3;
  string resolution = 4; // indicates a duration: e.g. 1d, 4h, 1h, 30m, 15m, 1m
  uint32 limit = 5;
}

message GetKlineResponse {
  map<string, Candles> marketCandles = 1;
}

message Candle {
  google.protobuf.Timestamp startTime = 1;
  google.protobuf.Timestamp updateTime = 2;
  string marketAddress = 3;
  string project = 4;
  double open = 5;
  double close = 6;
  double low = 7;
  double high = 8;
  double amount = 9;
  double volume = 10;
  double count = 11;
}

message Candles {
  repeated Candle candles = 1;
}

message GetOrderbookRequest {
  string market = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  Project project = 3;
}

message GetOrderbooksRequest {
  repeated string markets = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  Project project = 3;
}

message GetOrderbookResponse {
  string market = 1;
  string marketAddress = 2;
  repeated OrderbookItem bids = 3;
  repeated OrderbookItem asks = 4;
}

message OrderbookItem {
  double price = 1;
  double size = 2;
  string orderID = 3 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Serum generated OrderID"}];
  uint64 clientOrderID = 4;
  string ownerAddress = 5[(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "OpenOrders address for current market"}];
}

message GetMarketDepthRequest {
  string market = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  Project project = 3;
}

message GetMarketDepthsRequest {
  repeated string markets = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  Project project = 3;
}

message GetMarketDepthResponse {
  string market = 1;
  string marketAddress = 2;
  repeated MarketDepthItem bids = 3;
  repeated MarketDepthItem asks = 4;
}
message MarketDepthItem {
  double price = 1;
  double size = 2;
}

message GetTradesRequest {
  string market = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  Project project = 3;
}

message GetTradesResponse {
  repeated Trade trades = 1;
}

message Trade {
  Side side = 1;
  double size = 2;
  double fillPrice = 3;
  string orderID = 4;
  bool isMaker = 5;
  string address = 6;
  double feeOrRebate = 7;
  double orderPrice = 8;
}

message GetServerTimeRequest {}

message GetServerTimeResponse {
  string timestamp = 1;
}

message GetAccountBalanceRequest {
  string ownerAddress = 1 [(google.api.field_behavior) = REQUIRED];
}

message GetAccountBalanceResponse {
  repeated TokenBalance tokens = 1;
}

message TokenBalance {
  string symbol = 1;
  string tokenMint = 2;
  double settledAmount = 3;
  double unsettledAmount = 4;
  double openOrdersAmount = 5;
}

message GetTokenAccountsRequest {
  string ownerAddress = 1 [(google.api.field_behavior) = REQUIRED];
}

message GetTokenAccountsResponse {
  repeated TokenAccount accounts = 1;
}

message TokenAccount {
  string symbol = 1;
  string tokenMint = 2;
  string tokenAccount = 3;
  double amount = 4;
}

message PostOrderRequest {
  string ownerAddress = 1 [(google.api.field_behavior) = REQUIRED];
  string payerAddress = 2 [(google.api.field_behavior) = REQUIRED];
  string market = 3 [(google.api.field_behavior) = REQUIRED];
  Side side = 4 [(google.api.field_behavior) = REQUIRED];
  repeated common.OrderType type = 5 [(google.api.field_behavior) = REQUIRED];
  double amount = 6 [(google.api.field_behavior) = REQUIRED];
  double price = 7 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 8 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "If left empty the Serum API will lookup the account which can be time consuming"}];
  uint64 clientOrderID = 9 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Client defined OrderID"}];
  Project project = 10;
}

message PostReplaceOrderRequest {
  string ownerAddress = 1 [(google.api.field_behavior) = REQUIRED];
  string payerAddress = 2 [(google.api.field_behavior) = REQUIRED];
  string market = 3 [(google.api.field_behavior) = REQUIRED];
  Side side = 4 [(google.api.field_behavior) = REQUIRED];
  repeated common.OrderType type = 5 [(google.api.field_behavior) = REQUIRED];
  double amount = 6 [(google.api.field_behavior) = REQUIRED];
  double price = 7 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 8 [(google.api.field_behavior) = REQUIRED, (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "If left empty the Serum API will lookup the account which can be time consuming"}];
  uint64 clientOrderID = 9;
  string orderID = 10 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Serum generated OrderID"}];
  Project project = 11;
}

enum Side {
  S_UNKNOWN = 0;
  S_BID = 1;
  S_ASK = 2;
}

message PostOrderResponse {
  TransactionMessage transaction = 1;
  string openOrdersAddress = 2;
}

message PostCancelOrderRequest {
  string orderID = 1 [(google.api.field_behavior) = REQUIRED];
  Side side = 2 [(google.api.field_behavior) = REQUIRED];
  string marketAddress = 3 [(google.api.field_behavior) = REQUIRED];
  string ownerAddress = 4 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 5 [(google.api.field_behavior) = REQUIRED];
  Project project = 6;
}

message PostCancelByClientOrderIDRequest {
  uint64 clientOrderID = 1 [(google.api.field_behavior) = REQUIRED];
  string marketAddress = 2 [(google.api.field_behavior) = REQUIRED];
  string ownerAddress = 3 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 4 [(google.api.field_behavior) = REQUIRED];
  Project project = 5;
}

message PostCancelOrderResponse {
  TransactionMessage transaction = 1;
}

message PostCancelAllRequest {
  string market = 1 [(google.api.field_behavior) = REQUIRED];
  string ownerAddress = 2 [(google.api.field_behavior) = REQUIRED];
  repeated string openOrdersAddresses = 3;
  Project project = 4;
}

message TransactionMessage {
  string content = 1;
  bool isCleanup = 2;
}

message PostCancelAllResponse {
  repeated TransactionMessage transactions = 1;
}

message PostSettleRequest {
  string ownerAddress = 1 [(google.api.field_behavior) = REQUIRED];
  string market = 2 [(google.api.field_behavior) = REQUIRED];
  string baseTokenWallet = 3 [(google.api.field_behavior) = REQUIRED];
  string quoteTokenWallet = 4 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 5 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "If left empty the Serum API will lookup the account which can be time consuming"}];
  Project project = 6;
}

message PostSettleResponse {
  TransactionMessage transaction = 1;
}

message Settlement {
  string symbol = 1;
  double unsettled = 2;
  double amount = 3;
}

message GetOrdersRequest {
  string market = 1;
  OrderStatus status = 2;
  Side side = 3;
  repeated common.OrderType types = 4;
  google.protobuf.Timestamp from = 5;
  uint32 limit = 6;
  Direction direction = 7;
  string address = 8;
  string openOrdersAddress = 9;
  Project project = 10;
}

enum OrderStatus {
  OS_UNKNOWN = 0;
  OS_OPEN = 1;
  OS_PARTIAL_FILL = 2;
  OS_CANCELLED = 3;
  OS_FILLED = 4;
}

enum Direction {
  D_ASCENDING = 0;
  D_DESCENDING = 1;
}

message GetOrdersResponse {
  repeated Order orders = 1;
}

message Order {
  string orderID = 1;
  string market = 2;
  Side side = 3;
  repeated common.OrderType types = 4;
  double price = 5;
  double remainingSize = 6;
  google.protobuf.Timestamp createdAt = 7;
  string clientOrderID = 8;
  string openOrderAccount = 9;
}

message GetOrderStatusStreamRequest {
  string market = 1;
  string ownerAddress = 2;
  Project project = 3;
}

message GetOrderStatusStreamResponse {
  int64 slot = 1;
  GetOrderStatusResponse orderInfo = 2;
}

message GetOrderStatusResponse {
  string market = 1;
  string openOrderAddress = 2;
  string orderID = 3;
  uint64 clientOrderID = 4;
  float quantityReleased = 5;
  float quantityRemaining = 6;
  float fillPrice = 7;
  Side side = 8;
  OrderStatus orderStatus = 9;
  float orderPrice = 10;
}

message PostSubmitRequest {
  TransactionMessage transaction = 1 [(google.api.field_behavior) = REQUIRED];
  bool skipPreFlight = 2;
}

message PostSubmitRequestEntry {
  TransactionMessage transaction = 1 [(google.api.field_behavior) = REQUIRED];
  bool skipPreFlight = 2;
}

enum SubmitStrategy {
  P_UKNOWN = 0;
  P_SUBMIT_ALL = 1;
  P_ABORT_ON_FIRST_ERROR = 2;
  P_WAIT_FOR_CONFIRMATION = 3;
}

message PostSubmitBatchRequest {
  repeated PostSubmitRequestEntry entries = 1;
  SubmitStrategy submitStrategy = 2;
}

message PostSubmitResponse {
  string signature = 1;
}

message PostSubmitBatchResponseEntry {
  string signature = 1;
  string error = 2;
  bool submitted = 3;
}

message PostSubmitBatchResponse {
  repeated PostSubmitBatchResponseEntry transactions = 1;
}

message GetOpenOrdersRequest {
  string market = 1 [(google.api.field_behavior) = REQUIRED];
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  string address = 3 [(google.api.field_behavior) = OPTIONAL];
  string openOrdersAddress = 4 [(google.api.field_behavior) = OPTIONAL, (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "If left empty the Serum API will lookup the account which can be time consuming, Setting both address and openOrdersAddress is invalid, openOrdersAddress is preferred."}];
  Project project = 5;
}

message GetOpenOrdersResponse {
  repeated Order orders = 1;
}

message GetOrderByIDRequest {
  string orderID = 1 [(google.api.field_behavior) = REQUIRED];
  string market = 2;
  Project project = 3;
}

message GetOrderByIDResponse {
  Order order = 1;
}

message GetUnsettledRequest {
  string market = 1 [(google.api.field_behavior) = REQUIRED];
  string ownerAddress = 2 [(google.api.field_behavior) = REQUIRED];
  Project project = 3;
}

message UnsettledAccountToken {
  string address = 1;
  double amount = 2;
}

message UnsettledAccount {
  string account = 1;
  UnsettledAccountToken baseToken = 2;
  UnsettledAccountToken quoteToken = 3;
}

message GetUnsettledResponse {
  string market = 1;
  repeated UnsettledAccount unsettled = 2;
}

message GetOrderbooksStreamResponse {
  int64 slot = 1;
  GetOrderbookResponse orderbook = 2;
}

message GetMarketDepthsStreamResponse {
  int64 slot = 1;
  GetMarketDepthResponse Data = 2;
}

message GetTickersStreamResponse {
  int64 slot = 1;
  GetTickersResponse ticker = 2;
}

enum Step {
  STEP0 = 0;
  STEP1 = 1;
  STEP2 = 2;
  STEP3 = 3;
}

message GetTradesStreamResponse {
  int64 slot = 1;
  GetTradesResponse trades = 2;
}

message GetQuotesRequest{
  string inToken = 1;
  string outToken = 2;
  double inAmount = 3;
  double slippage = 4;
  int32 limit = 5;
  repeated Project projects = 6;
}

message GetQuotesResponse {
  string inToken = 1;
  string inTokenAddress = 2;
  string outToken = 3;
  string outTokenAddress = 4;
  double inAmount = 5;
  repeated ProjectQuote quotes = 6;
}

message GetRaydiumQuotesRequest {
  string inToken = 1;
  string outToken = 2;
  double inAmount = 3;
  double slippage = 4;
}

message GetRaydiumQuotesResponse{
  string inToken = 1;
  string inTokenAddress = 2;
  string outToken = 3;
  string outTokenAddress = 4;
  double inAmount = 5;
  repeated RaydiumQuoteRoute routes = 6;
}

message GetJupiterQuotesRequest{
  string inToken = 1;
  string outToken = 2;
  double inAmount = 3;
  double slippage = 4;
  int32 limit = 5;
}

message GetJupiterQuotesResponse{
  string inToken = 1;
  string inTokenAddress = 2;
  string outToken = 3;
  string outTokenAddress = 4;
  double inAmount = 5;
  repeated JupiterQuoteRoute routes = 6;
}

message ProjectQuote {
  Project project = 1;
  repeated QuoteRoute routes = 2;
}

message TradeSwapRequest {
  Project project = 1;
  string ownerAddress = 2;
  string inToken = 3;
  string outToken = 4;
  double inAmount = 5;
  double slippage = 6;
}

message PostJupiterSwapRequest {
  string ownerAddress = 1;
  string inToken = 2;
  string outToken = 3;
  double inAmount = 4;
  double slippage = 5;
}

message PostRaydiumSwapRequest {
  string ownerAddress = 1;
  string inToken = 2;
  string outToken = 3;
  double inAmount = 4;
  double slippage = 5;
}

message PostRaydiumSwapResponse{
  repeated TransactionMessage transactions = 1;
  double outAmount = 2;
  double outAmountMin = 3;
  common.PriceImpactPercentV2 priceImpact = 4;
  repeated common.Fee fees = 5;
}

message PostJupiterSwapResponse{
  repeated TransactionMessage transactions = 1;
  double outAmount = 2;
  double outAmountMin = 3;
  common.PriceImpactPercentV2 priceImpact = 4;
  repeated common.Fee fees = 5;
}

message PostRaydiumRouteSwapResponse{
  repeated TransactionMessage transactions = 1;
  double outAmount = 2;
  double outAmountMin = 3;
}

message PostJupiterRouteSwapResponse{
  repeated TransactionMessage transactions = 1;
  double outAmount = 2;
  double outAmountMin = 3;
  common.PriceImpactPercentV2 priceImpact = 4;
  repeated common.Fee fees = 5;
}

message RouteTradeSwapRequest {
  Project project = 1;
  string ownerAddress = 2;
  repeated RouteStep steps = 3;
  double slippage = 4;
}

message PostRaydiumRouteSwapRequest {
  string ownerAddress = 1;
  repeated RaydiumRouteStep steps = 2;
  double slippage = 3;
}

message RaydiumRouteStep {
  string inToken = 1;
  double inAmount = 2;
  string outToken = 3;
  double outAmount = 4;
  double outAmountMin = 5;
  string poolAddress = 6;
}

message PostJupiterRouteSwapRequest {
  string ownerAddress = 1;
  repeated JupiterRouteStep steps = 2;
  double slippage = 3;
}

message JupiterRouteStep {
  string inToken = 1;
  double inAmount = 2;
  string outToken = 3;
  double outAmount = 4;
  double outAmountMin = 5;
  StepProject project = 6;
}

message RouteStep {
  string inToken = 1;
  double inAmount = 2;
  string outToken = 3;
  double outAmount = 4;
  double outAmountMin = 5;
  StepProject project = 6;
}

message TradeSwapResponse{
  Project project = 1;
  repeated TransactionMessage transactions = 2;
  double outAmount = 3;
  double outAmountMin = 4;
  common.PriceImpactPercent priceImpact = 5;
  repeated common.Fee fees = 6;
}

enum Project {
  P_UNKNOWN = 0;
  P_ALL = 1;
  P_JUPITER = 2;
  P_RAYDIUM = 3;
  P_SERUM = 4;
  P_OPENBOOK = 5;
  P_DRIFT = 6;
}

message QuoteRoute {
  double inAmount = 1;
  double outAmount = 2;
  double outAmountMin = 3;
  repeated QuoteStep steps = 4;
}

message QuoteStep {
  StepProject project = 1;
  string inToken = 2;
  string inTokenAddress = 3;
  string outToken = 4;
  string outTokenAddress = 5;
  double inAmount = 6;
  double outAmount = 7;
  double slippage = 8;
  common.PriceImpactPercent priceImpactPercent = 9;
  common.Fee fee = 10;
  double outAmountMin = 11;
}

message JupiterQuoteRoute {
  double inAmount = 1;
  double outAmount = 2;
  double outAmountMin = 3;
  repeated JupiterQuoteStep steps = 4;
}

message JupiterQuoteStep {
  StepProject project = 1;
  string inToken = 2;
  string inTokenAddress = 3;
  string outToken = 4;
  string outTokenAddress = 5;
  double inAmount = 6;
  double outAmount = 7;
  double slippage = 8;
  common.PriceImpactPercentV2 priceImpactPercent = 9;
  common.Fee fee = 10;
  double outAmountMin = 11;
}

message RaydiumQuoteRoute {
  double inAmount = 1;
  double outAmount = 2;
  double outAmountMin = 3;
  repeated RaydiumQuoteStep steps = 4;
}

message RaydiumQuoteStep {
  string inToken = 1;
  string inTokenAddress = 2;
  string outToken = 3;
  string outTokenAddress = 4;
  double inAmount = 5;
  double outAmount = 6;
  double slippage = 7;
  common.PriceImpactPercentV2 priceImpactPercent = 8;
  common.Fee fee = 10;
  double outAmountMin = 11;
}

message StepProject {
  string label = 1;
  string id = 2;
}

message GetRecentBlockHashRequest {
}

message GetRecentBlockHashResponse {
  string blockHash = 1;
}

message Block {
  uint64 slot = 1;
  string hash = 2;
  int64 time = 3;
  uint64 height = 4;
}

message GetBlockStreamRequest {
}

message GetBlockStreamResponse {
  Block block = 1;
}

message GetPoolsRequest {
  repeated Project projects = 1;
  string pairOrAddress = 2;
}

message GetPoolsResponse {
  repeated ProjectPools projects = 1;
}

message GetRaydiumPoolsRequest {
  string pairOrAddress = 1;
}

message GetRaydiumPoolsResponse {
  repeated ProjectPool pools = 1;
}

message ProjectPools {
  Project project = 1;
  repeated ProjectPool pools = 2;
}

message ProjectPool {
  string pool = 1;
  string poolAddress = 2;

  int64 token1Reserves = 3;
  string token1MintAddress = 4;
  string token1MintSymbol = 5;

  int64 token2Reserves = 6;
  string token2MintAddress = 7;
  string token2MintSymbol = 8;
}

message GetQuotesStreamRequest {
  repeated Project   projects = 1;
  repeated TokenPair tokenPairs = 2;
}

message GetQuotesStreamResponse {
  int64 slot = 1;
  GetQuotesStreamUpdate quote = 2;
}

message GetQuotesStreamUpdate {
  string inToken = 1;
  string inTokenAddress = 2;
  string outToken = 3;
  string outTokenAddress = 4;
  double inAmount = 5;
  double outAmount = 6;
  Project project = 7;
}

message GetSwapsStreamRequest {
  repeated Project projects = 1;
  repeated string pools = 2;
  bool includeFailed = 3;
}

message GetSwapsStreamResponse {
  int64 slot = 1;
  GetSwapsStreamUpdate swap = 2;
}

message GetSwapsStreamUpdate {
  bool success = 1;
  Project project = 2;
  string poolAddress = 3;
  string inToken = 4;
  string inTokenAddress = 5;
  string outToken = 6;
  string outTokenAddress = 7;
  double inAmount = 8;
  double outAmountMin = 9;
  string sourceAccount = 10;
  string destinationAccount = 11;
  string ownerAccount = 12;
  string signature = 13;
}

message TokenPair {
  string inToken = 1;
  string outToken = 2;
  double inAmount = 3;
}

message GetPriceRequest {
  repeated string tokens = 1;
}

message GetPriceResponse {
  repeated TokenPrice tokenPrices = 1;
}

message GetRaydiumPricesRequest {
  repeated string tokens = 1;
}

message GetJupiterPricesRequest {
  repeated string tokens = 1;
}

message GetRaydiumPricesResponse {
  repeated TokenPriceV2 tokenPrices = 1;
}

message GetJupiterPricesResponse {
  repeated TokenPriceV2 tokenPrices = 1;
}

message TokenPrice {
  string token = 1;
  string tokenAddress = 2;
  Project project = 3;
  double buy = 4;
  double buySize = 5;
  double sell = 6;
  double sellSize = 7;
}

message TokenPriceV2 {
  string token = 1;
  string tokenAddress = 2;
  double buy = 3;
  double buySize = 4;
  double sell = 5;
  double sellSize = 6;
}

message GetPoolReservesStreamResponse {
  int64 slot = 1;
  PoolReserves reserves = 2;
}

message PoolReserves {
  string token1Reserves = 1;
  string token1Address = 2;
  string token2Reserves = 3;
  string token2Address = 4;
  string poolAddress = 5;
  Project project = 6;
}

message GetPoolReservesStreamRequest {
  repeated Project projects = 1;
  string pairOrAddress = 2;
}

message GetPricesStreamRequest {
  repeated Project projects = 1;
  repeated string tokens = 2;
}

message GetPricesStreamResponse {
  int64 slot = 1;
  TokenPrice price = 2;
}

// Drift messages
message GetPerpOrderbookRequest {
  common.PerpContract contract = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  Project project = 3;
}

message GetPerpOrderbooksRequest {
  repeated common.PerpContract contracts = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  Project project = 3;
}

message GetPerpOrderbookResponse {
  common.PerpContract contract = 1;
  repeated PerpOrderbookItem bids = 2;
  repeated PerpOrderbookItem asks = 3;
}

message PerpOrderbookItem {
  double price = 1;
  double size = 2;
  string orderID = 3 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "platform generated OrderID"}];
  string clientOrderID = 4;
  string status = 5;
  string orderType = 6;
  int64 slot = 7;
  bool reduceOnly = 8;
  double triggerPrice = 9;
  string triggerCondition = 10;
  bool postOnly = 11;
  double oraclePriceOffset = 12;
  int32 auctionDuration = 13;
  double auctionStartPrice  = 14;
  double auctionEndPrice = 15;
}

message GetPerpOrderbooksStreamResponse {
  int64 slot = 1;
  GetPerpOrderbookResponse orderbook = 2;
}

message GetUserRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  Project project = 3;
}

message GetUserResponse {
  repeated UserDetail userAccounts = 1;
}

message UserDetail {
  string status = 1;
  uint64 subAccountId = 2;
  string accountAddress = 3;
  string accountName = 4;
}

message PostCreateUserRequest {
  string ownerAddress = 1;
  Project project = 2;
  string action = 3; // CREATE , DELETE
  uint64 subAccountID = 4;
  string accountName = 5;
}

message PostCreateUserResponse {
  TransactionMessage transaction = 1;
}

message PostCancelPerpOrdersRequest {
  string ownerAddress = 1;
  Project project = 2 [(google.api.field_behavior) = REQUIRED];
  common.PerpContract contract = 3 [(google.api.field_behavior) = REQUIRED];
  string accountAddress = 4;
}

message PostCancelPerpOrdersResponse {
  repeated TransactionMessage transactions = 1;
}

message PostCancelDriftMarginOrderRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  uint64 clientOrderID = 3;
  uint64 orderID = 4;
}

message PostCancelDriftMarginOrderResponse {
  repeated TransactionMessage transactions = 1;
}

message PostModifyDriftOrderRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  uint64 orderID = 3;
  string newPositionSide = 4;
  string postOnly = 5;
  double newBaseAmount = 6;
  double newLimitPrice = 7;
}

message PostModifyDriftOrderResponse {
  TransactionMessage transaction = 1;
}

message PostCancelPerpOrderRequest {
  string ownerAddress = 1;
  Project project = 2;
  common.PerpContract contract = 3;
  uint64 clientOrderID = 4;
  uint64 orderID = 5;
  string accountAddress = 6;
}

message PostCancelPerpOrderResponse {
  TransactionMessage transaction = 1;
}

message PostCreateDriftUserRequest {
  string ownerAddress = 1;
  string action = 2; // CREATE , DELETE
  uint64 subAccountID = 3;
  string accountName = 4;
}

message PostCreateDriftUserResponse {
  TransactionMessage transaction = 1;
}

message GetDriftUserRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
}

message GetDriftUserResponse {
  Context context = 1;
  repeated UserDetail userAccounts = 2;
}

message PostCloseDriftPerpPositionsRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  repeated string contracts = 3;
}

message PostCloseDriftPerpPositionsResponse {
  repeated TransactionMessage transactions = 1;
}

message GetDriftPerpOrderbookRequest {
  string contract = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
}

message GetDriftPerpOrderbookResponse {
  Context context = 1;
  string contract = 2;
  repeated PerpOrderbookItem bids = 3;
  repeated PerpOrderbookItem asks = 4;
}

message PostManageCollateralRequest {
  string accountAddress = 1;
  double amount = 2;
  Project project = 3;
  common.PerpCollateralType type = 4;
  common.PerpCollateralToken token = 5;
  string toAccountAddress = 6;
}

message PostManageCollateralResponse {
  TransactionMessage transaction = 1;
}

message GetDriftOpenMarginOrdersRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  repeated string markets = 3;
}

message GetDriftOpenMarginOrdersResponse {
  Context context = 1;
  string ownerAddress = 2;
  repeated DriftMarginOrder orders = 3;
}

message DriftMarginOrder {
  uint64 orderID = 1;
  uint64 clientOrderID = 2;

  string market = 3;
  string positionSide = 4;

  string orderType = 5;

  double price = 6;
  double size = 7;
  double remainingSize = 8;
  string status = 9;

  string accountAddress = 10;
  uint64 subAccountID = 11;
  bool postOnly = 12;
}

message GetOpenPerpOrdersRequest {
  Project project = 1;
  string ownerAddress = 2;
  string accountAddress = 3;
  repeated common.PerpContract contracts = 4;
}

message GetOpenPerpOrdersResponse {
  string ownerAddress = 1;
  repeated PerpOrder orders = 2;
}

message PerpOrder {
  uint64 orderID = 1;
  uint64 clientOrderID = 2;

  common.PerpContract contract = 3;
  common.PerpPositionSide positionSide = 4;

  string orderType = 5;

  double price = 6;
  double size = 7;
  double remainingSize = 8;
  string status = 9;

  string accountAddress = 10;
  uint64 subAccountID = 11;
  bool postOnly = 12;
}

message GetPerpPositionsRequest {
  Project project = 1;
  string ownerAddress = 2;
  string accountAddress = 3;
  repeated common.PerpContract contracts = 4;
}

message GetPerpPositionsResponse {
  string ownerAddress = 1;

  repeated PerpPosition perpPositions = 2;
}

message PostClosePerpPositionsRequest {
  Project project = 1;
  string ownerAddress = 2;
  string accountAddress = 3;
  repeated common.PerpContract contracts = 4;
}

message PostClosePerpPositionsResponse {
  repeated TransactionMessage transactions = 1;
}

message PerpPosition {
  common.PerpContract contract = 1;
  double volumeAvailable = 2;
  double volumeInOrder = 3;

  double positionMargin = 4;
  common.PerpPositionSide positionSide = 5;

  double notionalValue = 6;
  double indexPrice = 7;
  double liquidationPrice = 8;

  string accountAddress = 9;
  int64 subAccountID = 10;
  double unrealizedPNL = 11;
}

message PostPerpOrderRequest {
  Project project = 1;
  string ownerAddress = 2;
  common.PerpContract contract = 3;
  string accountAddress = 4;
  common.PerpPositionSide positionSide = 5;
  double slippage = 6;
  common.PerpOrderType type = 7;
  double amount = 8;
  double price = 9;
  uint64 clientOrderID = 10;
  common.PostOnlyParams postOnly = 11;
}

message PostPerpOrderResponse {
  TransactionMessage transaction = 1;
}

message PostDriftPerpOrderRequest {
  string ownerAddress = 1;
  string contract = 2;
  string accountAddress = 3;
  string positionSide = 4;
  double slippage = 5;
  string type = 6;
  double amount = 7;
  double price = 8;
  uint64 clientOrderID = 9;
  string postOnly = 10;
}

message PostDriftPerpOrderResponse {
  TransactionMessage transaction = 1;
}

message PostDriftMarginOrderRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  string market = 3;
  string positionSide = 4;
  double slippage = 5;
  string type = 6;
  double amount = 7;
  double price = 8;
  uint64 clientOrderID = 9;
  string postOnly = 10;
}

message PostDriftMarginOrderResponse {
  TransactionMessage transaction = 1;
}

message PostDriftEnableMarginTradingRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  bool enableMargin = 3;
}

message PostDriftEnableMarginTradingResponse {
  TransactionMessage transaction = 1;
}

message GetPerpTradesStreamRequest {
  repeated common.PerpContract contracts = 1;
  Project project = 2;
}

message GetPerpTradesStreamResponse {
  Context context = 1;
  GetPerpTradesResponse trade = 2;
}

message GetPerpTradesResponse {
  common.PerpContract contract = 1;
  double indexPrice = 2;
  int64 marketIndex = 3;
  string filler = 4;
  double fillerReward = 5;
  int64 fillRecordID = 6;
  double baseAssetAmountFilled = 7;
  double quoteAssetAmountFilled = 8;
  double takerFee = 9;
  double makerFee = 10;
  double referrerReward = 11;
  double quoteAssetAmountSurplus = 12;
  double spotFulfillmentMethodFee = 13;
  string taker = 14;
  int64 takerOrderID = 15;
  string takerOrderDirection = 16;
  double takerOrderBaseAssetAmount = 17;
  double takerOrderCumulativeBaseAssetAmountFilled = 18;
  double takerOrderCumulativeQuoteAssetAmountFilled = 19;
  string maker = 20;
  int64 makerOrderID = 21;
  string makerOrderDirection = 22;
  double makerOrderBaseAssetAmount = 23;
  double makerOrderCumulativeBaseAssetAmountFilled = 24;
  double makerOrderCumulativeQuoteAssetAmountFilled = 25;
}

message PostSettlePNLRequest {
  string ownerAddress = 1;
  string settleeAccountAddress = 2;
  common.PerpContract contract = 3;
  Project project = 4;
}

message PostSettlePNLResponse {
  TransactionMessage transaction = 1;
}

message GetAssetsRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  Project project = 3;
}

message Asset {
  string valuationAsset = 1;
  double balance = 2;
  double valuation = 3;

  string accountAddress = 4;
  int64 subAccountID = 5;
}

message GetAssetsResponse {
  string ownerAddress = 1;
  repeated Asset assets = 2;
}

message PostSettlePNLsRequest {
  string ownerAddress = 1;
  repeated string settleeAccountAddresses = 2;
  common.PerpContract contract = 3;
  Project project = 4;
}

message PostSettlePNLsResponse {
  repeated TransactionMessage transactions = 1;
}

message PostLiquidatePerpRequest {
  string ownerAddress = 1;
  string settleeAccountAddress = 2;
  common.PerpContract contract = 3;
  double amount = 4;
  Project project = 5;
}

message PostLiquidatePerpResponse {
  TransactionMessage transaction = 1;
}

message GetPerpContractsRequest {
  Project project = 1;
}

message ContractInfo {
  common.PerpContract contract = 1;
  string contractAddress = 2;
  double fundingRate = 3;
  double minSize = 4;
  double perpPrice = 5;
  double indexPrice = 6;
  double openInterest = 7;
}

message GetPerpContractsResponse {
  repeated ContractInfo contracts = 1;
}

message GetOpenPerpOrderRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  uint64 orderID = 3;
  uint64 clientOrderID = 4;
  Project project = 5;
}

message GetOpenPerpOrderResponse {
  string ownerAddress = 1;
  PerpOrder order = 2;
}

message GetDriftOpenMarginOrderRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  uint64 orderID = 3;
  uint64 clientOrderID = 4;
}

message GetDriftOpenMarginOrderResponse {
  Context context = 1;
  string ownerAddress = 2;
  DriftMarginOrder order = 3;
}

message GetDriftOpenPerpOrderRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  uint64 orderID = 3;
  uint64 clientOrderID = 4;
}

message GetDriftOpenPerpOrderResponse {
  Context context = 1;
  string ownerAddress = 2;
  DriftPerpOrder order = 3;
}

message PostDriftManageCollateralRequest {
  string accountAddress = 1;
  double amount = 2;
  string type = 3;
  string token = 4;
  string toAccountAddress = 5;
}

message PostDriftManageCollateralResponse {
  TransactionMessage transaction = 1;
}

message GetDriftPerpContractsRequest {
}

message GetDriftPerpContractsResponse {
  Context context = 1;
  repeated ContractInfo contracts = 2;
}

message PostDriftSettlePNLRequest {
  string ownerAddress = 1;
  string settleeAccountAddress = 2;
  string contract = 3;
}

message PostDriftSettlePNLResponse {
  TransactionMessage transaction = 1;
}

message GetDriftAssetsRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
}

message GetDriftAssetsResponse {
  Context context = 1;
  string ownerAddress = 2;
  repeated Asset assets = 3;
}

message PostDriftSettlePNLsRequest {
  string ownerAddress = 1;
  repeated string settleeAccountAddresses = 2;
  string contract = 3;
}

message PostDriftSettlePNLsResponse {
  repeated TransactionMessage transactions = 1;
}

message PostLiquidateDriftPerpRequest {
  string ownerAddress = 1;
  string settleeAccountAddress = 2;
  string contract = 3;
  double amount = 4;
}

message PostLiquidateDriftPerpResponse {
  TransactionMessage transaction = 1;
}


// Drift V2
message Context {
  uint64 slot = 1;
}

message GetDriftOpenPerpOrdersRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  repeated string contracts = 3;
}

message GetDriftOpenPerpOrdersValue {
  string ownerAddress = 1;
  repeated DriftPerpOrder orders = 2;
}

message GetDriftOpenPerpOrdersResponse {
  Context context = 1;
  GetDriftOpenPerpOrdersValue data = 2;
}

message DriftPerpOrder {
  uint64 orderID = 1;
  uint64 clientOrderID = 2;

  string contract = 3;
  string positionSide = 4;

  string orderType = 5;

  double price = 6;
  double size = 7;
  double remainingSize = 8;
  string status = 9;

  string accountAddress = 10;
  uint64 subAccountID = 11;
  bool postOnly = 12;
}

message PostDriftCancelPerpOrderRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  string contract = 3;
  uint64 clientOrderID = 4;
  uint64 orderID = 5;
}

message PostDriftCancelPerpOrderValue {
  repeated TransactionMessage transactions = 1;
}

message PostDriftCancelPerpOrderResponse {
  Context context = 1;
  PostDriftCancelPerpOrderValue data = 2;
}

message GetDriftPerpPositionsRequest {
  string ownerAddress = 1;
  string accountAddress = 2;
  repeated string contracts = 3;
}

message GetDriftPerpPositionsValue {
  string ownerAddress = 1;
  repeated DriftPerpPosition perpPositions = 2;
}

message GetDriftPerpPositionsResponse {
  Context context = 1;
  GetDriftPerpPositionsValue data = 2;
}

message DriftPerpPosition {
  string contract = 1;
  string accountAddress = 2;
  int64 subAccountID = 3;
  double volumeAvailable = 4;
  double volumeInOrder = 5;

  double positionMargin = 6;
  string positionSide = 7;

  double notionalValue = 8;
  double indexPrice = 9;
  double liquidationPrice = 10;
  double unrealizedPNL = 11;
}

message GetDriftMarginOrderbooksRequest {
  repeated string markets = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  bool metadata = 3;
}

message GetDriftMarginOrderbooksStreamResponse {
  Context context = 1;
  GetDriftMarginOrderbookResponse orderbook = 2;
}

message GetDriftMarginOrderbookRequest {
  string market = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  bool metadata = 3;
}

message GetDriftMarginOrderbookValue {
  string market = 1;
  string marketAddress = 2;
  repeated DriftMarginOrderbookItem bids = 3;
  repeated DriftMarginOrderbookItem asks = 4;
}

message GetDriftMarginOrderbookResponse {
  Context context = 1;
  GetDriftMarginOrderbookValue data = 2;
}

message DriftMarginOrderbookItem {
  double price = 1;
  double size = 2;
  string orderID = 3 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Drift generated OrderID"}];
  uint64 clientOrderID = 4;
  string ownerAddress = 5;
  map<string, string> metadata = 6;
}

message GetDriftMarketsRequest {
  bool metadata = 1;
}

message GetDriftMarketsValue {
  map<string, DriftMarket> markets = 1;
}

message GetDriftMarketsResponse {
  Context context = 1;
  GetDriftMarketsValue data = 2;
}

message DriftMarket {
  string market = 1;
  string status = 2;
  string address = 3;
  string baseMint = 4;
  string quotedMint = 5;
  int64 baseDecimals = 6;
  int64 quoteDecimals = 7;
  map<string, string> metadata = 8;
}

message GetDriftMarketDepthRequest {
  string contract = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
}

message GetDriftMarketDepthsStreamRequest {
  repeated string contracts = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
}

message GetDriftMarketDepthStreamResponse {
  Context context = 1;
  GetDriftMarketDepthResponse data = 2;
}

message DriftMarketDepthItem {
  double price = 1;
  double size = 2;
}

message GetDriftMarketDepthValue {
  string contract = 1;
  repeated DriftMarketDepthItem bids = 2;
  repeated DriftMarketDepthItem asks = 3;
}

message GetDriftMarketDepthResponse {
  Context context = 1;
  GetDriftMarketDepthValue data = 2;
}
// end of Drift V2

//Openbook V2 Messages
message GetMarketsRequestV2 {
}

message GetMarketsResponseV2 {
  map<string, MarketV2> markets = 1;
}

message MarketV2 {
  string market = 1;
  string address = 3;
  string baseMint = 4;
  string quotedMint = 5;
  int64 baseDecimals = 6;
  int64 quoteDecimals = 7;
}

message GetOrderbookRequestV2 {
  string market = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
}

message GetOrderbookResponseV2 {
  string market = 1;
  string marketAddress = 2;
  repeated OrderbookItemV2 bids = 3;
  repeated OrderbookItemV2 asks = 4;
}

message OrderbookItemV2 {
  double price = 1;
  double size = 2;
  string orderID = 3 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Serum generated OrderID"}];
  uint64 clientOrderID = 4;
  string ownerAddress = 5[(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "OpenOrders address for current market"}];
}

message GetMarketDepthRequestV2 {
  string market = 1;
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
}

message GetMarketDepthResponseV2 {
  string market = 1;
  string marketAddress = 2;
  repeated MarketDepthItemV2 bids = 3;
  repeated MarketDepthItemV2 asks = 4;
}

message MarketDepthItemV2 {
  double price = 1;
  double size = 2;
}

message PostOrderRequestV2 {
  string ownerAddress = 1 [(google.api.field_behavior) = REQUIRED];
  string payerAddress = 2 [(google.api.field_behavior) = REQUIRED];
  string market = 3 [(google.api.field_behavior) = REQUIRED];
  Side side = 4 [(google.api.field_behavior) = REQUIRED];
  double amount = 6 [(google.api.field_behavior) = REQUIRED];
  double price = 7 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 8 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "If left empty the Serum API will lookup the account which can be time consuming"}];
  uint64 clientOrderID = 9 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Client defined OrderID"}];
}

message PostReplaceOrderRequestV2 {
  string ownerAddress = 1 [(google.api.field_behavior) = REQUIRED];
  string payerAddress = 2 [(google.api.field_behavior) = REQUIRED];
  string market = 3 [(google.api.field_behavior) = REQUIRED];
  Side side = 4 [(google.api.field_behavior) = REQUIRED];
  double amount = 6 [(google.api.field_behavior) = REQUIRED];
  double price = 7 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 8 [(google.api.field_behavior) = REQUIRED, (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "If left empty the Serum API will lookup the account which can be time consuming"}];
  uint64 clientOrderID = 9[(google.api.field_behavior) = OPTIONAL, (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Client defined OrderID"}];
  string orderID = 10 [(google.api.field_behavior) = OPTIONAL, (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Openbook generated OrderID"}];
}

message PostCancelOrderRequestV2 {
  string orderID = 1 [(google.api.field_behavior) = OPTIONAL];
  Side side = 2 [(google.api.field_behavior) = REQUIRED];
  string marketAddress = 3 [(google.api.field_behavior) = REQUIRED];
  string ownerAddress = 4 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 5 [(google.api.field_behavior) = REQUIRED];
  uint64 clientOrderID = 6[(google.api.field_behavior) = OPTIONAL];
}

message PostCancelOrderResponseV2 {
  repeated TransactionMessage transactions = 1;
}

message PostSettleRequestV2 {
  string ownerAddress = 1 [(google.api.field_behavior) = REQUIRED];
  string market = 2 [(google.api.field_behavior) = REQUIRED];
  string baseTokenWallet = 3 [(google.api.field_behavior) = REQUIRED];
  string quoteTokenWallet = 4 [(google.api.field_behavior) = REQUIRED];
  string openOrdersAddress = 5 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "If left empty the Serum API will lookup the account which can be time consuming"}];
}
message GetOpenOrdersRequestV2 {
  string market = 1 [(google.api.field_behavior) = REQUIRED];
  uint32 limit = 2 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "Use 0 for no limits"}];
  string address = 3 [(google.api.field_behavior) = OPTIONAL];
  string openOrdersAddress = 4 [(google.api.field_behavior) = OPTIONAL, (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "If left empty the Serum API will lookup the account which can be time consuming, Setting both address and openOrdersAddress is invalid, openOrdersAddress is preferred."}];
  string orderID = 5 [(google.api.field_behavior) = OPTIONAL];
  uint64 clientOrderID = 6[(google.api.field_behavior) = OPTIONAL];
}

message GetUnsettledRequestV2 {
  string market = 1 [(google.api.field_behavior) = REQUIRED];
  string ownerAddress = 2 [(google.api.field_behavior) = REQUIRED];
}
//End of Openbook V2 Messages
